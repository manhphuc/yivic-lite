/* Import Theming main */
@import "parts/theming";

// Import Fonts
@import "parts/font";

// Global Variables
@import "parts/variables";

@import "parts/mixins";

// Reset global
@import "parts/reset";

// Base main CSS global
@import "parts/base";

// =======================================
// Layout safeguards (overflow + wrapping)
// =======================================

/* Prevent global horizontal scrolling on small screens. */
html,
body {
  max-width: 100%;
  overflow-x: hidden;
}

/* Allow flex/grid children to shrink properly (prevents overflow). */
.yivic-lite-layout,
.yivic-lite-layout__inner,
.yivic-lite-main,
.yivic-lite-content,
.yivic-lite-post,
.yivic-lite-page,
.yivic-lite-sidebar,
.yivic-lite-footer {
  min-width: 0;
}

/* Footer text safety (long strings). */
.yivic-lite-footer {
  overflow-wrap: break-word;
  word-break: break-word;
}

/* Wrap long, unbroken titles/headings from Theme Unit Test data. */
.yivic-lite-post__title,
.yivic-lite-page__title,
.yivic-lite-term-archive__title,
.entry-title,
.page-title,
.widget-title,
.wp-block-heading {
  overflow-wrap: anywhere;
  word-break: break-word; /* fallback */
  hyphens: auto;
}

/* Breadcrumb/current item can also be extremely long. */
.yivic-lite-breadcrumb,
.yivic-lite-breadcrumb a,
.yivic-lite-breadcrumb span,
.breadcrumb,
.breadcrumb a {
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* Safety for common long text blocks. */
.yivic-lite-post__content,
.yivic-lite-page__content,
.comment-content,
.yivic-lite-comments__content,
.widget,
.textwidget {
  overflow-wrap: break-word;
  word-break: break-word;
}

/* Pre blocks: allow horizontal scrolling instead of overflowing the layout. */
pre {
  max-width: 100%;
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
}

pre code {
  white-space: pre;
}

// Home Main Sections

// ================================
// Layout Wrapper
// ================================
.yivic-lite-page__wrap {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

// =======================================
// Shared single content card
// Used by single post and single page
// =======================================
%yivic-single-card {
  margin: 0 auto 23px;
  padding: 16px;
  border-radius: 6px;
  background: #ffffff;
  color: $yivic-post-text-color;
  font-size: 16px;
  line-height: 1.7;
}

// ================================
// Header
// ================================
@import "modules/header/yivic-lite-header";

// ================================
// Menu
// ================================
@import "modules/menu/yivic-lite-main-menu";

// ================================
// Post
// ================================
@import "modules/post/yivic-lite-post";

// ================================
// Pagination
// ================================
@import "modules/pagination/yivic-lite-pagination";

// ================================
// Sidebar
// ================================
@import "modules/sidebar/yivic-lite-sidebar";

// ================================
// Single Post
// ================================
@import "modules/single/yivic-lite-single";

// ================================
// Single Page
// ================================
@import "modules/page/yivic-lite-page";

// ================================
// Comment
// ================================
@import "modules/comment/yivic-lite-comment";

// ================================
// 404 Page
// ================================
@import "modules/404/yivic-lite-404";

// ================================
// Search
// ================================
@import "modules/search/yivic-lite-search";

// ================================
// Breadcrumb
// ================================
@import "modules/breadcrumb/yivic-lite-breadcrumb";

// ================================
// Accessibility helpers
// ================================
.screen-reader-text {
  position: absolute;
  left: -10000px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

.screen-reader-text:focus {
  position: static;
  width: auto;
  height: auto;
  padding: 8px 16px;
  margin: 8px;
  background: #000;
  color: #fff;
  z-index: 1000;
}

/* =============================================================
 * Accessibility: Content links must be underlined (WP.org)
 * -------------------------------------------------------------
 * - Links inside readable content areas must not rely on color alone.
 * - Underlines remain visible on hover/focus, too.
 * Exclusions:
 * - navigation/menu links
 * - button-like links
 * ============================================================= */

/* Shared accessibility variables (single source of truth). */
:root {
  --yivic-focus-color: #3858e9;
  --yivic-focus-ring: 2px;
  --yivic-focus-offset: 2px;

  --yivic-link-underline: max(1px, 0.08em);
  --yivic-link-underline-hover: max(2px, 0.15em);
  --yivic-link-underline-offset: 0.15em;
}

/* Readable content link targets. */
$yivic_content_link_scopes: (
        ".yivic-lite-post__content",
        ".yivic-lite-post__excerpt",
        ".yivic-lite-post__desc",
        ".yivic-lite-page__content",
        ".entry-content",
        ".entry-summary",
        ".wp-block-post-content",
        ".wp-block-post-excerpt__excerpt",
        ".term-description",
        ".taxonomy-description",
        ".yivic-lite-post__footer",
        ".yivic-lite-post__meta",
        ".yivic-lite-post-nav",
        ".comment-content",
        ".wp-block-comment-content",
        ".yivic-lite-comments__content",
        ".comment-respond",
        ".logged-in-as",
        ".comment-notes",
        ".yivic-lite-sidebar",
        ".widget",
        ".widget-area",
        ".widget_archive",
        ".widget_categories",
        ".widget_recent_entries",
        ".widget_recent_comments",
        ".widget_meta",
        ".widget_pages",
        ".textwidget",
        ".wp-block-archives",
        ".wp-block-categories",
        ".wp-block-latest-posts",
        ".wp-block-latest-comments",
        ".wp-block-page-list"
);

/* Apply underlines to links within readable content areas. */
@each $scope in $yivic_content_link_scopes {
  #{$scope} a {
    text-decoration: underline;
    text-decoration-thickness: var(--yivic-link-underline);
    text-underline-offset: var(--yivic-link-underline-offset);

    &:hover,
    &:focus-visible {
      text-decoration-thickness: var(--yivic-link-underline-hover);
    }
  }
}

/* Exclusions: navigation/menu links. */
.yivic-lite-header a,
.yivic-lite-header__nav a,
.yivic-lite-header__bar a,
.main-navigation a,
.wp-block-navigation a,
.wp-block-navigation__container a,
.menu a,
.sub-menu a,
.nav-links a,
.pagination a,
.page-numbers a {
  text-decoration: none !important;
}

/* Exclusions: button-like links. */
a.wp-block-button__link,
a.wp-element-button,
a.button,
a[role="button"] {
  text-decoration: none !important;
}

/* Keyboard-only focus ring (enabled via `.yivic-kbd`). */
html.yivic-kbd :where(
  a[href],
  button,
  input,
  select,
  textarea,
  summary,
  [role="button"],
  [tabindex]:not([tabindex="-1"]),
  [contenteditable="true"]
):focus-visible {
  outline: var(--yivic-focus-ring) solid var(--yivic-focus-color);
  outline-offset: var(--yivic-focus-offset);
}

/* Remove focus outline outside keyboard mode (mouse/touch). */
:where(
  a[href],
  button,
  input,
  select,
  textarea,
  summary,
  [role="button"],
  [tabindex]:not([tabindex="-1"]),
  [contenteditable="true"]
):focus {
  outline: none;
}

// ================================
// Footer
// ================================
.yivic-lite-footer {
  border-top: 1px solid #eee;
  margin-top: 2rem;

  &__inner {
    max-width: 1200px;
    margin: 0 auto;
    padding: 1rem;
    text-align: center;
    font-size: 0.875rem;
    color: #666;
  }
}

/* Yivic import last main */
@import "parts/breakpoints";
